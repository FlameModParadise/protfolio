/**
 * ============================================================
 * BUBBLE TRAIL EFFECT STYLES
 * ============================================================
 * File: /htdocs/assets/css/bubble-trail.css

 * ============================================================
 */

/* ============================================================
   ROOT VARIABLES & CONFIGURATION
   ============================================================ */
:root {
    /* Animation Timing */
    --bubble-duration-small: 2s;
    --bubble-duration-medium: 3s;
    --bubble-duration-large: 4s;
    --bubble-click-duration: 0.6s;
    
    /* Animation Distances */
    --bubble-rise-distance: -250%;
    --bubble-float-distance: -150px;
    --bubble-float-initial: -20px;
    
    /* Opacity Values */
    --bubble-opacity-initial: 0.7;
    --bubble-opacity-medium: 0.6;
    --bubble-opacity-click: 0.8;
    --bubble-opacity-fade: 0.4;
    
    /* Scale Values */
    --bubble-scale-full: 1;
    --bubble-scale-small: 0.2;
    --bubble-scale-tiny: 0.3;
    --bubble-scale-click: 1.5;
    --bubble-scale-click-final: 2;
    
    /* Z-Index Layers */
    --bubble-container-z-index: 9999;
    
    /* Blur Effects */
    --bubble-glow-blur: 1px;
    
    /* Shadow Intensity */
    --bubble-shadow-spread: 10px;
    --bubble-shadow-spread-light: 8px;
}

/* Color Palette for Dark Theme */
:root {
    /* Purple Bubble */
    --bubble-purple-primary: rgba(99, 102, 241, 0.6);
    --bubble-purple-secondary: rgba(99, 102, 241, 0.2);
    --bubble-purple-shadow: rgba(99, 102, 241, 0.3);
    
    /* Green Bubble */
    --bubble-green-primary: rgba(16, 185, 129, 0.6);
    --bubble-green-secondary: rgba(16, 185, 129, 0.2);
    --bubble-green-shadow: rgba(16, 185, 129, 0.3);
    
    /* Blue Bubble */
    --bubble-blue-primary: rgba(59, 130, 246, 0.6);
    --bubble-blue-secondary: rgba(59, 130, 246, 0.2);
    --bubble-blue-shadow: rgba(59, 130, 246, 0.3);
    
    /* Pink Bubble */
    --bubble-pink-primary: rgba(236, 72, 153, 0.6);
    --bubble-pink-secondary: rgba(236, 72, 153, 0.2);
    --bubble-pink-shadow: rgba(236, 72, 153, 0.3);
}

/* Color Palette for Light Theme */
body.light-theme {
    /* Purple Bubble - Light Theme */
    --bubble-purple-primary: rgba(79, 70, 229, 0.5);
    --bubble-purple-secondary: rgba(79, 70, 229, 0.1);
    --bubble-purple-shadow: rgba(79, 70, 229, 0.2);
    
    /* Green Bubble - Light Theme */
    --bubble-green-primary: rgba(5, 150, 105, 0.5);
    --bubble-green-secondary: rgba(5, 150, 105, 0.1);
    --bubble-green-shadow: rgba(5, 150, 105, 0.2);
    
    /* Blue Bubble - Light Theme */
    --bubble-blue-primary: rgba(37, 99, 235, 0.5);
    --bubble-blue-secondary: rgba(37, 99, 235, 0.1);
    --bubble-blue-shadow: rgba(37, 99, 235, 0.2);
    
    /* Pink Bubble - Light Theme */
    --bubble-pink-primary: rgba(219, 39, 119, 0.5);
    --bubble-pink-secondary: rgba(219, 39, 119, 0.1);
    --bubble-pink-shadow: rgba(219, 39, 119, 0.2);
    
    /* Adjusted shadow spread for light theme */
    --bubble-shadow-spread: var(--bubble-shadow-spread-light);
}

/* ============================================================
   CONTAINER STYLES
   ============================================================ */

/**
 * Main container for all bubble effects
 * Fixed positioning to cover entire viewport
 * pointer-events: none allows clicks to pass through
 */
.bubble-trail-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: var(--bubble-container-z-index);
    overflow: hidden;
    isolation: isolate; /* Create new stacking context */
}

/* ============================================================
   BASE BUBBLE STYLES
   ============================================================ */

/**
 * Base bubble element
 * Positioned absolutely relative to container
 * Default animation and initial state
 */
.bubble {
    position: absolute;
    border-radius: 50%;
    pointer-events: none;
    will-change: transform, opacity; /* Optimize for animations */
    backface-visibility: hidden; /* Prevent flickering */
    transform-origin: center center;
    
    /* Default animation */
    animation: bubble-rise var(--bubble-duration-medium) ease-out forwards;
    opacity: 0;
}

/* ============================================================
   SIZE VARIANTS
   ============================================================ */

/**
 * Small bubble variant
 * Faster animation with float effect
 */
.bubble.small {
    animation-name: bubble-float;
    animation-duration: var(--bubble-duration-small);
}

/**
 * Medium bubble variant (default)
 * Standard rise animation
 */
.bubble.medium {
    animation-duration: var(--bubble-duration-medium);
}

/**
 * Large bubble variant
 * Slower animation for larger bubbles
 */
.bubble.large {
    animation-duration: var(--bubble-duration-large);
}

/* ============================================================
   COLOR VARIANTS
   ============================================================ */

/**
 * Purple bubble variant
 */
.bubble.purple {
    background: radial-gradient(
        circle at 30% 30%,
        var(--bubble-purple-primary),
        var(--bubble-purple-secondary)
    );
    box-shadow: 
        0 0 var(--bubble-shadow-spread) var(--bubble-purple-shadow),
        inset 0 0 5px rgba(255, 255, 255, 0.2);
}

/**
 * Green bubble variant
 */
.bubble.green {
    background: radial-gradient(
        circle at 30% 30%,
        var(--bubble-green-primary),
        var(--bubble-green-secondary)
    );
    box-shadow: 
        0 0 var(--bubble-shadow-spread) var(--bubble-green-shadow),
        inset 0 0 5px rgba(255, 255, 255, 0.2);
}

/**
 * Blue bubble variant
 */
.bubble.blue {
    background: radial-gradient(
        circle at 30% 30%,
        var(--bubble-blue-primary),
        var(--bubble-blue-secondary)
    );
    box-shadow: 
        0 0 var(--bubble-shadow-spread) var(--bubble-blue-shadow),
        inset 0 0 5px rgba(255, 255, 255, 0.2);
}

/**
 * Pink bubble variant
 */
.bubble.pink {
    background: radial-gradient(
        circle at 30% 30%,
        var(--bubble-pink-primary),
        var(--bubble-pink-secondary)
    );
    box-shadow: 
        0 0 var(--bubble-shadow-spread) var(--bubble-pink-shadow),
        inset 0 0 5px rgba(255, 255, 255, 0.2);
}

/* ============================================================
   SPECIAL EFFECTS
   ============================================================ */

/**
 * Glow effect modifier
 * Adds soft blur for ethereal appearance
 */
.bubble.glow {
    filter: blur(var(--bubble-glow-blur));
}

/**
 * Click bubble variant
 * Larger bubble with pop animation on click events
 */
.bubble.click-bubble {
    animation-name: bubble-pop;
    animation-duration: var(--bubble-click-duration);
}

/* ============================================================
   ANIMATION KEYFRAMES
   ============================================================ */

/**
 * Primary rise animation
 * Bubble grows, rises, and fades out
 */
@keyframes bubble-rise {
    0% {
        transform: translate(-50%, -50%) scale(0);
        opacity: 0;
    }
    
    10% {
        transform: translate(-50%, -50%) scale(var(--bubble-scale-full));
        opacity: var(--bubble-opacity-initial);
    }
    
    100% {
        transform: translate(-50%, var(--bubble-rise-distance)) scale(var(--bubble-scale-tiny));
        opacity: 0;
    }
}

/**
 * Float animation for smaller bubbles
 * Gentler rise with less distance traveled
 */
@keyframes bubble-float {
    0% {
        transform: translate(-50%, -50%) translateY(0) scale(0);
        opacity: 0;
    }
    
    20% {
        transform: translate(-50%, -50%) translateY(var(--bubble-float-initial)) scale(var(--bubble-scale-full));
        opacity: var(--bubble-opacity-medium);
    }
    
    100% {
        transform: translate(-50%, -50%) translateY(var(--bubble-float-distance)) scale(var(--bubble-scale-small));
        opacity: 0;
    }
}

/**
 * Pop animation for click events
 * Rapid expansion and fade
 */
@keyframes bubble-pop {
    0% {
        transform: translate(-50%, -50%) scale(0);
        opacity: var(--bubble-opacity-click);
    }
    
    50% {
        transform: translate(-50%, -50%) scale(var(--bubble-scale-click));
        opacity: var(--bubble-opacity-fade);
    }
    
    100% {
        transform: translate(-50%, -50%) scale(var(--bubble-scale-click-final));
        opacity: 0;
    }
}

/* ============================================================
   RESPONSIVE & ACCESSIBILITY
   ============================================================ */

/**
 * Disable on touch devices
 * Improves performance on mobile devices where hover
 * interactions are not available
 */
@media (hover: none) and (pointer: coarse) {
    .bubble-trail-container {
        display: none;
    }
}

/**
 * Respect user's motion preferences
 * Disables animations for users who prefer reduced motion
 */
@media (prefers-reduced-motion: reduce) {
    .bubble {
        animation: none !important;
        opacity: 0 !important;
        transition: none !important;
    }
    
    .bubble-trail-container {
        display: none;
    }
}

/**
 * Performance optimization for low-end devices
 * Simplifies effects when reduced data is preferred
 */
@media (prefers-reduced-data: reduce) {
    .bubble {
        box-shadow: none !important;
        filter: none !important;
    }
    
    .bubble.glow {
        filter: none !important;
    }
}

/* ============================================================
   UTILITY CLASSES
   ============================================================ */

/**
 * Performance mode
 * Can be toggled via JavaScript for better performance
 */
.bubble-trail-container.performance-mode .bubble {
    box-shadow: none;
    filter: none;
    will-change: auto;
}

/**
 * Pause animations
 * Useful for debugging or user preference
 */
.bubble-trail-container.paused .bubble {
    animation-play-state: paused;
}

/* ============================================================
   BROWSER-SPECIFIC FIXES
   ============================================================ */

/**
 * Firefox-specific adjustments
 */
@-moz-document url-prefix() {
    .bubble {
        image-rendering: -moz-crisp-edges;
    }
}